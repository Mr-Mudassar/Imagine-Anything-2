(()=>{var e={};e.id=149,e.ids=[149],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},96206:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},15673:e=>{"use strict";e.exports=require("node:events")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},35356:e=>{"use strict";e.exports=require("stream/web")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},29830:e=>{"use strict";e.exports=require("util/types")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},50039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=r(67096),i=r(16132),a=r(37284),n=r.n(a),o=r(32564),u={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);r.d(t,u);let l=["",{children:["(user)",{children:["generate-images",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19658)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(user)\\generate-images\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3661)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(user)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,63976)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(user)\\generate-images\\page.tsx"],d="/(user)/generate-images/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(user)/generate-images/page",pathname:"/generate-images",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},64452:(e,t,r)=>{Promise.resolve().then(r.bind(r,96240))},96240:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var s=r(30784),i=r(63012),a=r(23458),n=r(75130),o=r(52451),u=r.n(o),l=r(11440),c=r.n(l),d=r(9885),p=r(10345),m=r(71319),x=r(61971),g=r(10737);let __WEBPACK_DEFAULT_EXPORT__=function(){let[e,t]=(0,d.useState)(null),[r,o]=(0,d.useState)(!1),[l,_]=(0,d.useState)(""),h=(0,a.o)(e=>e.setOpenLoginModal),f=(0,a.o)(e=>e.setAllImages),b=(0,a.o)(e=>e.imageGenerateLimit),[q,w]=(0,d.useState)(!0),v=(0,a.o)(e=>e.setImageDownloadLimit),y=(0,a.o)(e=>e.imageDownloadLimit),j=(0,a.o)(e=>e.userData);(0,a.o)(e=>e.isRemix);let P=(0,a.o)(e=>e.navOpen),k=(0,a.o)(e=>e.setNavOpen),C=(0,m.useMutation)({mutationKey:"generate-image",mutationFn:async e=>{let t=await n.x.post("/generate-image/",e);return t.data},onSuccess:e=>{o(!1),t(e),decrementLimit("image_generation")},onError:()=>{o(!1),p.default.error("Failed to generate image")}}),decrementLimit=async e=>{try{let t=await n.x.post("/decrement_limit/",{user_id:j?.user_data?.user_id,action:e});p.default.success(t?.data?.message),f(t?.data?.user_subscription?.max_generate_limit),v(t?.data?.user_subscription?.max_download_limit)}catch(e){console.log(e)}},finishHandler=async e=>j?0===b?p.default.success("Maximum image generation limit reached"):void(o(!0),C.mutate({...e,username:j?.user_data?.username,user_id:j?.user_data?.user_id,email:j?.user_data?.email})):h(!0),N=(0,m.useMutation)({mutationKey:"generate-image-countdown",mutationFn:async e=>{let t=await n.x.post("/decrement_limit/",e);return p.default.success(t?.data?.message),f(t?.data?.user_subscription?.max_generate_limit),v(t?.data?.user_subscription?.max_download_limit),t.data}}),D=(0,m.useMutation)({mutationKey:"/refine-prompt/",mutationFn:async e=>{let t=await n.x.post("/refine-prompt/",e);return w(!1),_(t.data.refined_prompt),t.data}});return P&&k(!1),(0,s.jsxs)("div",{className:"flex flex-col gap-y-8 mt-9 items-center justify-center pb-12",children:[s.jsx("div",{className:"relative flex flex-col gap-x-5 items-center w-full md:w-3/5",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?finishHandler({prompt:l}):h(!0)},className:"flex w-full gap-y-3 justify-between !h-12",children:[s.jsx("input",{value:l,onChange:e=>{q&&_(e.target.value)},className:"w-full h-12 rounded-l-[140px] text-lg px-5 focus:border-transparent text-black",required:!0}),s.jsx("button",{type:"submit",className:"text-center px-5 bg-[#C970FF] text-base md:text-lg text-white rounded-e-3xl",children:"Generate"}),j?.user_data.usersubscription.ability_to_remix&&(0,s.jsxs)("button",{onClick:()=>""!==l&&D.mutate({prompt:l}),className:"border-none transition-all duration-700 absolute transform -translate-x-1/2 -translate-y-1/2 left-1/2 top-[120%] bg-[#C970FF]/20 backdrop-blur-xl px-5 py-1 rounded-full flex items-center gap-x-6 -mt-2",children:[s.jsx("span",{className:"font-alumniRegular text-xl font-bold text-white",children:D?.isLoading?"Refining Prompt":"Refine Prompt"}),s.jsx("div",{className:`${D?.isLoading?"animate-spin":""}`,children:s.jsx(u(),{src:g.Z,width:20,height:20,alt:"remix icon"})})]})]})}),s.jsx("div",{className:"flex gap-4 z-50",children:s.jsx("section",{className:"relative overflow-hidden rounded-2xl cursor-pointer",children:r?s.jsx(x.Z,{}):e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(u(),{className:"object-contain",src:e?.generated_image_url,alt:"generated image",width:350,height:350,quality:100}),s.jsx("section",{className:"absolute bg-gradient-to-t from-black/95 to-transparent top-0 w-full h-full",children:s.jsx(c(),{onClick:e=>{y>0?N.mutate({user_id:j?.user_data?.user_id,action:"image_download"}):0==y&&(e.preventDefault(),p.default.success("maximum downloads succeeded"))},href:e?.generated_image_url,className:"absolute right-3 top-3 flex items-center justify-center  w-8 h-8 rounded-lg",children:s.jsx(u(),{src:i.Z,width:20,height:20,alt:"download icon"})})})]})})})]})}},19658:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>page});var s=r(4656),i=r(95153);let a=(0,i.createProxy)(String.raw`C:\Users\hp\Desktop\imagin for personal\src\components\TextPrompt.tsx`),{__esModule:n,$$typeof:o}=a,u=a.default;function page(){return s.jsx("div",{children:s.jsx(u,{})})}r(3542)},63012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s={src:"/_next/static/media/Download.b5fb4e8a.svg",height:18,width:14,blurWidth:0,blurHeight:0}},10737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s={src:"/_next/static/media/Remix.a68e43d2.svg",height:24,width:25,blurWidth:0,blurHeight:0}}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[52,694,440,307,488,241,618,971],()=>__webpack_exec__(50039));module.exports=r})();