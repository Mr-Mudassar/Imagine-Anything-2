(()=>{var e={};e.id=244,e.ids=[244],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},2010:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>x,tree:()=>u});var r=t(67096),a=t(16132),n=t(37284),l=t.n(n),i=t(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let u=["",{children:["(admin)",{children:["users-and-subscribed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,18059)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(admin)\\users-and-subscribed\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,42430)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(admin)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,63976)),"C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\hp\\Desktop\\imagin for personal\\src\\app\\(admin)\\users-and-subscribed\\page.tsx"],d="/(admin)/users-and-subscribed/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(admin)/users-and-subscribed/page",pathname:"/users-and-subscribed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},45877:(e,s,t)=>{Promise.resolve().then(t.bind(t,37653))},37653:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>SubscribedUsers});var r=t(30784),a=t(9885),n=t(52451),l=t.n(n),i=t(62588),o=t(79636),u=t.n(o),c=t(72781),d=t(13214),p=t(84887),x=t(68602),m=t(71319),f=t(75130);let g={src:"/_next/static/media/filters.d6206511.svg",height:16,width:28,blurWidth:0,blurHeight:0},h=[{value:"all",label:"All Users"},{value:"free",label:"Free Users"},{value:"premium",label:"Premium Users"},{value:"deluxe",label:"Deluxe Users"}];var b=t(27487),y=t.n(b);function SubscribedUsers(){let[e,s]=(0,a.useState)(1),[t,n]=(0,a.useState)(""),[o,b]=(0,a.useState)("all"),[w,v]=(0,a.useState)(!1),deleteUser=e=>{console.log(e),k.mutate(e)},_=y()(e=>{n(e)},500),onPageChange=e=>{console.log(e),s(e)},j=[{title:"Name",dataIndex:"username",key:"username",render:e=>r.jsx("span",{className:"text-white  font-medium text-[18px]",children:e})},{title:"Email",dataIndex:"email",key:"email",render:e=>r.jsx("span",{className:"text-white  font-medium text-[18px]",children:e})},{title:"Subscription",dataIndex:"subscription",key:"subscription",render:(e,s)=>r.jsx(u(),{type:"primary",className:`text-white ${s?.usersubscription?.plan_type==="free"?"bg-white/10 border-gray-600 backdrop-blur-3xl":"primary-btn"} !py-1 !px-5 !rounded-xl text-base font-bold`,children:s?.usersubscription?.plan_type})},{title:"Actions",dataIndex:"actions",key:"actions",render:(e,s)=>r.jsx("span",{onClick:()=>deleteUser(s.user_id),className:" font-medium text-[18px] text-[#FF7070] cursor-pointer",children:"Remove"})}],k=(0,m.useMutation)({mutationKey:["delete-user"],mutationFn:async e=>f.x.delete(`/users/delete/${e}/`).then(()=>{x.ZP.success("User is successfully deleted"),N()}).catch(s=>{console.log(s),x.ZP.error(`Failed to delete the user with id=${e} `)})}),{data:q,isLoading:P,refetch:N}=(0,m.useQuery)({queryKey:["get-users",e,o,t],queryFn:async()=>f.x.get("/users/all/",{params:{page:e}}).then(({data:e})=>{let s=e?.map(e=>({...e,subscription:e?.usersubscription?.plan_type}));console.log(s);let r="all"===o?s:s.filter(e=>e.subscription===o),a=""===t.trim()?r:r.filter(e=>e.username.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase()));return{...e?.data,results:a}}).catch(e=>console.log("Failed to get users",e))}),handleToggleAccess=async()=>{console.log("function run");try{let e=await f.x.post("/toggle_global_mode/"),s=e.data.mode;console.log(s),v(s),console.log("value set",w)}catch(e){console.log(e)}};return r.jsx("div",{className:"px-2 md:px-10 py-10 antd-table antd-selector-for-admin",children:(0,r.jsxs)("div",{className:"pagination-line-black flex flex-col border border-gray-600 rounded-2xl min-w-[350px] overflow-x-auto",children:[(0,r.jsxs)("header",{className:"p-5 flex flex-col md:flex-row gap-3 justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col w-full md:w-1/3 text-white",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["Users ",`(${q?.results?.length})`]}),r.jsx("span",{children:"Manage your users here"})]}),(0,r.jsxs)("div",{className:"w-full md:w-1/3 flex gap-2",children:[r.jsx("span",{className:"text-xl text-white",children:"Users access"}),(0,r.jsxs)("label",{className:"inline-flex items-center justify-center cursor-pointer ",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:w,onChange:handleToggleAccess}),r.jsx("div",{className:"relative w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full md:w-1/2  gap-4 ",children:[r.jsx(d.default,{defaultValue:"Apply Filters",className:"h-full",onChange:e=>{b(e)},options:h,suffixIcon:r.jsx(l(),{src:g,alt:"filtered icon"})}),r.jsx(c.default,{size:"large",placeholder:"search...",prefix:r.jsx(i.default,{className:"mr-2"}),onChange:e=>_(e.target.value),className:"bg-transparent"})]})]}),r.jsx(p.Z,{dataSource:q?.results,columns:j,loading:P,className:"rounded-lg border-t border-[#7a7a7a]",pagination:{pageSize:10,total:q?.count,onChange:e=>{s(e),onPageChange(e)}}})]})})}},18059:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\hp\Desktop\imagin for personal\src\app\(admin)\users-and-subscribed\page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,o=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[52,694,440,641,602,490,887,487,488,241,115],()=>__webpack_exec__(2010));module.exports=t})();