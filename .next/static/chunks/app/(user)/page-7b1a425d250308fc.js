(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{33836:function(e,t,l){Promise.resolve().then(l.bind(l,53042))},9210:function(e,t,l){"use strict";l.d(t,{Z:function(){return DialogModel}});var s=l(57437),a=l(9805),n=l(14781),i=l(2265);function DialogModel(e){let{isOpen:t,closeModal:l,children:o,dialogModelSize:r}=e;return(0,s.jsx)(a.u,{appear:!0,show:t,as:i.Fragment,children:(0,s.jsxs)(n.V,{as:"div",className:"relative z-10",onClose:l,children:[(0,s.jsx)(a.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(a.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsx)(n.V.Panel,{className:"w-full ".concat("wide"===r?"max-w-6xl":"max-w-2xl"," transform overflow-hidden rounded-2xl bg-white  text-left align-middle shadow-xl transition-all"),children:o})})})})]})})}},53042:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return HomePage}});var s=l(57437),a=l(7404),n=l(78278),i=l(50129),o={src:"/_next/static/media/failedPayment.d49415b3.svg",height:56,width:60,blurWidth:0,blurHeight:0},r=l(16691),u=l.n(r),c=l(24033),d=l(9210),PaymentCancelModal=e=>{let{setIsOpen:t,isOpen:l}=e,a=(0,c.useRouter)(),handleOk=()=>{a.push("/"),t(!1)};return(0,s.jsx)(d.Z,{isOpen:l,closeModal:handleOk,children:(0,s.jsxs)("div",{className:"flex flex-col items-center  font-alumniRegular bg-[#141414] pt-24 pb-10 px-24",children:[(0,s.jsx)(u(),{src:o,alt:"success icon",width:50,height:50}),(0,s.jsx)("p",{className:"text-[28px] text-white font-semibold tracking-wide",children:"Payment Failed"}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center my-3 text-center text-[16px] text-white tracking-wide",children:[(0,s.jsx)("p",{children:"Your Payment is failed. Use another card or"}),(0,s.jsx)("p",{children:"Please try again later"})]}),(0,s.jsx)("button",{onClick:handleOk,className:"text-black mt-10 px-10 py-3 font-bold !rounded-xl bg-[#FFD970] hover:!text-black hover:bg-[#eece75]",children:"Okay"})]})})},m={src:"/_next/static/media/successPayment.d858b038.svg",height:67,width:64,blurWidth:0,blurHeight:0},components_PaymentSuccessPopup=e=>{let{setIsOpen:t,isOpen:l}=e,a=(0,c.useRouter)(),handleOk=()=>{a.push("/"),t(!1)};return(0,s.jsx)(d.Z,{isOpen:l,closeModal:handleOk,children:(0,s.jsxs)("div",{className:"flex flex-col items-center  font-alumniRegular bg-[#141414] pt-24 pb-10 px-24",children:[(0,s.jsx)(u(),{src:m,alt:"success icon",width:50,height:50}),(0,s.jsx)("p",{className:"text-[28px] text-white font-semibold tracking-wide",children:"Payment Success"}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center my-3 text-center text-[16px] text-white tracking-wide",children:[(0,s.jsx)("p",{children:"Your Payment is successfully completed"}),(0,s.jsx)("p",{children:"Enjoy your Selected Plan"})]}),(0,s.jsx)("button",{onClick:handleOk,className:"text-black mt-10 px-10 py-3 font-bold !rounded-xl bg-[#FFD970] hover:!text-black hover:bg-[#eece75]",children:"Okay"})]})})},x=l(64966),g=l(16896),h=l(38891),v=l(2890),p=l.n(v),y=l(2265),f=l(5925),b=l(59077);function HomePage(){let[e,t]=(0,y.useState)(!1),l=(0,x.Z)("userInfo")[1],[o,r]=(0,y.useState)({page:1,page_size:20,sort_by:"likes"}),[u,d]=(0,y.useState)("likes"),[m,v]=(0,y.useState)(null),[_]=(0,y.useState)(null),[j,w]=(0,y.useState)(""),k=(0,c.useSearchParams)(),P=k.get("success"),[S,N]=(0,y.useState)(!1),[F,O]=(0,y.useState)(!1),E=(0,g.o)(e=>e.allImages),C=(0,g.o)(e=>e.setAllImages),I=(0,g.o)(e=>e.clientFetchAllData),D=(0,g.o)(e=>e.setClientFetchAllData),q=(0,g.o)(e=>e.setImageGenerateLimit),M=(0,g.o)(e=>e.setPlanType),Z=(0,g.o)(e=>e.setUserData),R=(0,g.o)(e=>e.setIsRemix),T=(0,g.o)(e=>e.setImageDownloadLimit),z=p().debounce(()=>{let{scrollTop:l,scrollHeight:s,clientHeight:a}=document.documentElement,n=+(l/(s-a)*100).toFixed(1);!(n>90)||e||I?n<90&&e&&t(!1):(t(!0),r(e=>({...e,page:e.page+1})))},200);(0,b.useQuery)({queryKey:["get-all-images",j,o,u],queryFn:()=>j?h.x.get("/categories/".concat(j,"/images"),{params:{...o,sort_by:u}}):(console.log("Category api __----------------",h.x),h.x.get("/categories/all/images/",{params:{...o,sort_by:u}})),onSuccess:e=>{var t;let{data:l}=e;""===j?C([...E,...null==l?void 0:l.results]):C([...null==l?void 0:l.results]),(null==E?void 0:E.length)+(null==l?void 0:null===(t=l.results)||void 0===t?void 0:t.length)>=(null==l?void 0:l.count)&&D(!0)},onError:e=>{f.default.error(e.message)},enabled:!0});let{hasNextPage:H}=(0,b.useInfiniteQuery)({queryKey:["get-all-images",u],queryFn:async e=>{let{pageParam:t=1}=e,{data:l}=await h.x.get("categories/all/images/?page=".concat(t,"&page_size=10&sort_by=").concat(u));return l},getNextPageParam:(e,t)=>{let l=(null==t?void 0:t.length)?(null==t?void 0:t.length)+1:void 0;return l},getPreviousPageParam:(e,t)=>e.prevCursor}),{mutate:K}=(0,b.useMutation)({mutationKey:["user-plan-subscription"],mutationFn:async e=>h.x.post("/change-plan/",e).then(e=>{var t,s,a,n,i,o,r,u;let{data:c}=e;l(c),Z(c),M(null==c?void 0:null===(s=c.user_data)||void 0===s?void 0:null===(t=s.usersubscription)||void 0===t?void 0:t.plan_type),R(null==c?void 0:null===(n=c.user_data)||void 0===n?void 0:null===(a=n.usersubscription)||void 0===a?void 0:a.ability_to_remix),T(null==c?void 0:null===(o=c.user_data)||void 0===o?void 0:null===(i=o.usersubscription)||void 0===i?void 0:i.max_download_limit),q(null==c?void 0:null===(u=c.user_data)||void 0===u?void 0:null===(r=u.usersubscription)||void 0===r?void 0:r.max_generate_limit)})});return(0,b.useQuery)({queryKey:["search-any-image",m],queryFn:()=>h.x.get("/search/",{params:{q:m}}),onSuccess:e=>{var t,l,s;let{data:a}=e;C(null==a?void 0:a.results),(null==a?void 0:null===(t=a.results)||void 0===t?void 0:t.length)===0?f.default.success("No images found in the list"):f.default.success("".concat(null==a?void 0:null===(l=a.results)||void 0===l?void 0:l.length," image").concat((null==a?void 0:null===(s=a.results)||void 0===s?void 0:s.length)>1?"s":""," found in the list"))},onError:e=>{console.error("Error occurred while fetching data:",e.message)},enabled:null!==m&&""!==m}),(0,y.useEffect)(()=>(window.addEventListener("scroll",z),()=>{window.removeEventListener("scroll",z)}),[e,z]),(0,y.useEffect)(()=>{C([]),D(!1),r({page:1,page_size:20,sort_by:u})},[u,C,D]),(0,y.useEffect)(()=>{if("true"===P){var e,t;N(!0);let l=localStorage.getItem("plan_name"),s=localStorage.getItem("userInfo"),a=JSON.parse(s),n={user_id:(null==a?void 0:null===(e=a.user_data)||void 0===e?void 0:e.user_id)||null,new_plan_type:l,email:(null==a?void 0:null===(t=a.user_data)||void 0===t?void 0:t.email)||null};K(n)}else"false"===P&&O(!0)},[P,K]),(0,s.jsxs)("div",{className:"flex flex-col gap-y-6 w-full pt-5  pb-12",children:[(0,s.jsx)(n.Z,{setSearchQuery:v,setSearchedData:_,setSortBy:d}),E.length>0||H?(0,s.jsx)(a.Z,{imagesDetails:E}):(0,s.jsx)(i.Z,{}),(0,s.jsx)(components_PaymentSuccessPopup,{setIsOpen:N,isOpen:S}),(0,s.jsx)(PaymentCancelModal,{setIsOpen:O,isOpen:F})]})}}},function(e){e.O(0,[866,986,173,77,166,326,249,210,187,971,472,744],function(){return e(e.s=33836)}),_N_E=e.O()}]);